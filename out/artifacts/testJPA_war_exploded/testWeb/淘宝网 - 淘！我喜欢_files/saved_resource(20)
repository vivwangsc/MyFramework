define("kg/offline/6.0.3/index",["json","util","base","ua"],function(e,t,n){var i,r,a,s=e("json"),u=e("util"),o=e("base"),l=e("ua");i=function(e){"use strict";var t,n,i=s,r=u,a={},o="DEADLINE-KEY";return r.mix(a,{init:function(){var e=(new Date).getTime();t=localStorage,n=i.parse(t.getItem(o))||{};for(var r in n)n.hasOwnProperty(r)&&(dateKey=parseInt(n[r],10),dateBet=dateKey-e,dateBet<=0?(this.removeItem(r),delete n[r],this._saveDeadLine()):this._deadlineKey(r,dateBet));return this},setItem:function(e,i,r){if(r){var a=parseInt(r,10),s=(new Date).getTime();n[e]=a+s,this._deadlineKey(e,a),this._saveDeadLine()}return t.setItem(e,i),!0},getItem:function(e){return t.getItem(e)},removeItem:function(e){return t.removeItem(e),delete n[e],this._saveDeadLine(),!this.getItem(e)},clear:function(){return t.clear(),0===this.size()},size:function(){var e=t.length;return t[o]?e-1:e},getAll:function(e){for(var n,r=t.length,a={},s=0;r>s;s++)n=t.key(s),a[n]=t.getItem(n),n===o&&delete a[n];return e?a:i.stringify(a)},timeRemain:function(e){return t[e]?e in n?n[e]-(new Date).getTime():-1:0},usedByte:function(){var e=this.getAll().length;return t[o]&&(e+=i.stringify(n).length,e+=o.length),e},_deadlineKey:function(e,i){var a=this;r.later(function(){t.removeItem(e),delete n[e],a._saveDeadLine()},i)},_saveDeadLine:function(){t.setItem(o,i.stringify(n))}}),e=a}(),r=function(e){"use strict";var t,n,i,r=s,a=u,o={},l=document,f=(new Date).getTime(),c="IE-OFFLINE",m="IE-SINGLE-KEY",d="TIME-DEADLINE";return a.mix(o,{init:function(){return t=l.createElement("link"),t.addBehavior&&(t.style.behavior="url(#default#userData)",l.getElementsByTagName("head")[0].appendChild(t)),t.load(c),n=r.parse(t.getAttribute(m))||{},i=r.parse(t.getAttribute(d))||{},this._initDeadline(),this},_initDeadline:function(){var e,t;for(var n in i)i.hasOwnProperty(n)&&(e=parseInt(i[n],10),t=e-f,0>=t?this.removeItem(n):this._deadlineKey(n,t))},setItem:function(e,t,r){if(n[e]=t,r){var a=parseInt(r,10),s=(new Date).getTime();i[e]=a+s,this._deadlineKey(e,a)}return this._saveToBrowser()},getItem:function(e){return n[e]},removeItem:function(e){return delete n[e],delete i[e],this._saveToBrowser()},clear:function(){return n={},i={},this._saveToBrowser()},size:function(){var e=0;for(var t in n)n.hasOwnProperty(t)&&e++;return e},timeRemain:function(e){return e in n?e in i?i[e]-(new Date).getTime():-1:0},usedByte:function(){var e=0,t=r.stringify(i);return""!==i&&(e+=t.length+d.length),e+=r.stringify(n).length},getAll:function(e){return e?n:r.stringify(n)},_deadlineKey:function(e,t){var n=this;a.later(function(){n.removeItem(e)},t)},_saveToBrowser:function(){var e=!0;try{t.setAttribute(d,r.stringify(i)),t.setAttribute(m,r.stringify(n)),t.save(c)}catch(a){e=!1}return e}}),e=o}(),a=function(e){"use strict";function t(){t.superclass.constructor.call(this)}var n=i,a=r,s=o,f=l,c=u,m="undefined"!=typeof window.localStorage?n:f.ie<8?a:null;return m.init(),c.extend(t,s,{setItem:function(e,t,n){var i=parseInt(n,10);return c.isString(e)&&c.isString(t)&&""!==c.trim(e)?(c.Offline.fire("setItem",{key:e,value:t,deadline:n}),m.setItem(e,t,i)):(c.error("Format error"),!1)},getItem:function(e){return c.isString(e)?m.getItem(e):(c.error("Need String"),null)},removeItem:function(e){return c.isString(e)?(c.Offline.fire("removeItem",{key:e}),m.removeItem(e)):(c.error("Need String"),!1)},clear:function(){return c.Offline.fire("clear"),m.clear()},getAll:function(e){return m.getAll(e)},size:function(){return m.size()},timeRemain:function(e){return c.isString(e)?m.timeRemain(e):(c.error("Need String"),!1)},usedByte:function(){return m.usedByte()}}),c.Offline=new t,e=t}(),n.exports=a});/*!build time : 2014-07-30 5:08:47 PM*/
KISSY.add("kg/datalazyload/2.0.0/index",function(a,b,c,d,e){function f(a){var b,c,d,e=[];return function(f,g){return 0===g||g||(g=1),1&g&&!c&&(c=!0,a(function(a){for(b=a;d=e.shift();)try{d&&d.apply(null,[b])}catch(c){setTimeout(function(){throw c},0)}})),b?(f&&f.apply(null,[b]),b):(2&g||f&&e.push(f),b)}}function g(b,c,d){function e(){f&&(f.cancel(),f=0),g=a.now(),b.apply(d||this,arguments),h=a.now()}var f,g=0,h=0,c=c||150;return a.mix(function(){!g||h>=g&&a.now()-h>c||g>h&&a.now()-g>8*c?e():(f&&f.cancel(),f=a.later(e,c,0,null,arguments))},{stop:function(){f&&(f.cancel(),f=0)}})}function h(c,d,e){c.style.display=u,c.className="";var f=b.create("<div>");c.parentNode.insertBefore(f,c);var g=c.value;if(a.isFunction(e)){var h=e({type:"textarea",elem:c,value:g});h&&(g=h)}return b.html(f,g,d),f}function i(a){return a._ks_lazy_width?a._ks_lazy_width:a._ks_lazy_width=b.outerWidth(a)}function j(a){return a._ks_lazy_height?a._ks_lazy_height:a._ks_lazy_height=b.outerHeight(a)}function k(a,c,d){if(!a.offsetWidth)return!1;var e,f=b.offset(a),g=!0,h=f.left,k=f.top,l={left:h,top:k,right:h+i(a),bottom:k+j(a)};return e=m(c,l),e&&d&&(g=m(d,l)),g&&e}function l(b,c){var d=this;if(!(d instanceof l))return new l(b,c);var e=b;a.isPlainObject(e)||(e=c||{},b&&(e.container=b)),l.superclass.constructor.call(d,e),d._callbacks={},d._containerIsNotDocument=9!=d.get("container").nodeType,a.isArray(e.container)&&(d._backCompact=1),d._initLoadEvent(),e.container&&d.addElements(e.container),d._loadFn(),a.ready(function(){d._loadFn()}),d.resume()}function m(a,b){var c={};return c.top=Math.max(a.top,b.top),c.bottom=Math.min(a.bottom,b.bottom),c.left=Math.max(a.left,b.left),c.right=Math.min(a.right,b.right),c.bottom>=c.top&&c.right>=c.left}function n(c,d,e,f){"img-src"===d&&(d="img"),a.isArray(c)||(c=[b.get(c)]);var g=new l(p,{});g.set("imgFlag",e||q+s),g.set("areaFlag",e||r+s),g.set("onStart",f),g.set("force",!0),g.addElements(c,d)}var o=a.Env.host,p=o.document,q="data-ks-lazyload",r="ks-datalazyload",s="-custom",t="default",u="none",v="scroll",w="touchmove",x="resize",y=100,z=0,A=function(b,c,d,e){function f(a){b.src!=a&&(b.src=a),b.removeAttribute(c)}c=c||q;var g=b.getAttribute(c),h={type:"img",elem:b,src:g},i=!a.isFunction(d)||d(h)!==!1;i&&h.src&&(a.isFunction(e)?a.use("./plugin/webp",function(a,b){b.isSupport(function(a){f(a?e(h.src):h.src)})}):f(h.src))};return l.ATTRS={diff:{value:t},placeholder:{value:"http://g.tbcdn.cn/s.gif"},execScript:{value:!0},container:{setter:function(c){return c=c||p,a.isWindow(c)?c=c.document:(c=b.get(c),"body"==b.nodeName(c)&&(c=c.ownerDocument)),c},valueFn:function(){return p}},autoDestroy:{value:!0},onStart:{value:null}},a.extend(l,d,{_initLoadEvent:function(){var b=this,c=b.get("autoDestroy");b.imgHandle=function(){A(this,b.get("imgFlag"),b.get("onStart"),b.get("webpReplacer"))},b.textareaHandle=function(){b.addElements(h(this,b.get("execScript"),b.get("onStart")))},b._loadFn=g(function(){c&&0==b._counter&&a.isEmptyObject(b._callbacks)&&b.destroy(),b._loadItems()},y,b)},refresh:function(){this._loadFn()},_loadItems:function(){var b=this,c=b.get("container");(!b._containerIsNotDocument||c.offsetWidth)&&(b._windowRegion=b._getBoundingRect(),!b._backCompact&&b._containerIsNotDocument&&(b._containerRegion=b._getBoundingRect(b.get("container"))),a.each(b._callbacks,function(a,c){a&&b._loadItem(c,a)}))},_loadItem:function(a,b){var c=this,b=b||c._callbacks[a];if(!b)return!0;var d=b.el,e=!1,f=b.fn;if(c.get("force")||k(d,c._windowRegion,c._containerRegion))try{e=f.call(d)}catch(g){setTimeout(function(){throw g},0)}return e!==!1&&delete c._callbacks[a],e},addCallback:function(c,d){c=b.get(c);var e=this,f=e._callbacks,g={el:c||document,fn:d||a.noop},h=++z;f[h]=g,e._windowRegion?e._loadItem(h,g):e.refresh()},removeCallback:function(c,d){c=b.get(c);var e=this._callbacks;a.each(e,function(a,b){a.el==c&&(d?a.fn==d:1)&&delete e[b]})},getElements:function(){var b=this,c=[],d=[],e=b._callbacks;return a.each(e,function(a){a.fn==b.imgHandle&&c.push(a.el),a.fn==b.textareaHandle&&d.push(a.el)}),{images:this._images,textareas:this._textareas}},addElements:function(c,d){"string"==typeof c?c=b.query(c):a.isArray(c)||(c=[c]);var e=this;e._counter=e._counter||0,a.each(c,function(c){d&&"img"!==d||a.each(a.filter([c].concat(b.query("img",c)),function(a){return a.getAttribute&&a.getAttribute(e.get("imgFlag")||q)},e),function(a){e.onPlaceHolder=e.onPlaceHolder||f(function(a){var b=new Image,c=e.get("placeholder");b.src=c,b.onload=b.onerror=function(){a(c)}}),a.offsetWidth?e.addCallback(a,e.imgHandle):(e._counter++,a.onload=function(){e._counter--,e.addCallback(a,e.imgHandle)},a.src||e.onPlaceHolder(function(b){a.src||(a.src=b)}))}),d&&"textarea"!==d||a.each(b.query("textarea."+(e.get("areaFlag")||r),c),function(a){e.addCallback(a,e.textareaHandle)})})},removeElements:function(c){"string"==typeof c?c=b.query(c):a.isArray(c)||(c=[c]);var d=this,e=d._callbacks;a.each(e,function(b,d){a.inArray(b.el,c)&&delete e[d]})},_getBoundingRect:function(c){var d,f,g,h;if(c!==e){d=b.outerHeight(c),f=b.outerWidth(c);var i=b.offset(c);g=i.left,h=i.top}else d=b.viewportHeight(),f=b.viewportWidth(),g=b.scrollLeft(),h=b.scrollTop();var j=this.get("diff"),k=j===t?f:j,l=0,m=k,n=j===t?d:j,o=0,p=n,q=g+f,r=h+d;return a.isObject(j)&&(l=j.left||0,m=j.right||0,o=j.top||0,p=j.bottom||0),g-=l,q+=m,h-=o,r+=p,{left:g,top:h,right:q,bottom:r}},pause:function(){var a=this,b=a._loadFn;if(!a._destroyed&&(c.remove(o,v,b),c.remove(o,w,b),c.remove(o,x,b),b.stop(),a._containerIsNotDocument)){var d=a.get("container");c.remove(d,v,b),c.remove(d,w,b)}},resume:function(){var a=this,b=a._loadFn;if(!a._destroyed&&(c.on(o,v,b),c.on(o,w,b),c.on(o,x,b),a._containerIsNotDocument)){var d=a.get("container");c.on(d,v,b),c.on(d,w,b)}},destroy:function(){var b=this;b.pause(),b._callbacks={},a.log("datalazyload is destroyed!"),b.fire("destroy"),b._destroyed=1}}),l.loadCustomLazyData=n,a.DataLazyload=l,l},{requires:["dom","event","base"]});define("kg/slide/6.0.8/index",["node","util","event","json","event-custom","ua","anim"],function(e,t,n){var i,a,s,o,r=e("node"),l=e("util"),c=(e("event"),e("json")),u=e("event-custom"),d=e("ua");e("anim");i=function(e){"use strict";var t=r,n=l,i=t;return n.augment(i,{_delegate:function(){var e=this;return n.isFunction(arguments[1])?e.delegate(arguments[0],arguments[2],arguments[1]):e.delegate.apply(e,arguments),e},indexOf:function(e){var i=this;if(n.isUndefined(e))return null;e[0]&&(e=e[0]);var a=0;return i.each(function(n,i){n=t.all(n),n[0]===e&&(a=i)}),a},size:function(){return this.length},set:function(e,t){return"innerHTML"===e?this.html(t):this.attr(e,t),this},get:function(e){var t=this,n={innerHTML:function(){return t.html()},region:function(){return{height:t.height(),width:t.width()}}};return e in n?n[e]():void 0},appendChild:function(){return this.append.apply(this,arguments),this},setStyle:function(e,t){return this.css.apply(this,arguments),this},setStyles:function(e){return this.css.apply(this,arguments),this},cloneNode:function(){return this.clone.apply(this,arguments)}}),t.create=function(e){return t(e)},e}(),a=function(e){"use strict";var t=r,n=c;return e={setHash:function(e,t){var n,i;"object"==typeof e?(n=window.location.href,t=e):n=e,n.indexOf("#")<0&&(n+="#");var a=this.getHash(n);for(i in t)a[i]=t[i];n=n.split("#")[0]+"#";for(i in a)n+=i+"="+a[i]+"&";return n=n.substr(0,n.length-1)},getHash:function(e){var t=e||window.location.href;if(t.indexOf("#")<0)return{};var i=t.split("#")[1];if(""===i)return{};"&"==i[i.length-1]&&(i=i.substr(0,i.length-1)),i=i.replace(/"/gi,"'"),i=i.replace(/=/gi,'":"'),i=i.replace(/&/gi,'","'),i+='"',i='{"'+i+"}";var a=n.parse(i);return a},_globalEval:function(e){if(e&&/\S/.test(e)){var t=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],n=document.createElement("script");n.text=e,t.insertBefore(n,t.firstChild),setTimeout(function(){t.removeChild(n)},1)}},execScript:function(e){var n,i,a,s,o,r,l=this,c=new RegExp(/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/gi),u=t.one("head")[0],d=/\ssrc=(['"])(.*?)\1/i,h=/\scharset=(['"])(.*?)\1/i;for(c.lastIndex=0;n=c.exec(e);)i=n[1],a=i?i.match(d):!1,a&&a[2]?(o=document.createElement("script"),o.src=a[2],(s=i.match(h))&&s[2]&&(o.charset=s[2]),o.async=!0,u.appendChild(o)):(r=n[2])&&r.length>0&&l._globalEval(r)},isDaily:function(){return/daily\.taobao\.net/.test(window.location.hostname)?!0:!1},getHiddenProp:function(){if("hidden"in document)return"hidden";for(var e=["webkit","moz","ms","o"],t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null},isHidden:function(){var e=this.getHiddenProp();return e?document[e]:!1}}}(),s=function(e){"use strict";function t(e){var t,i,a,s,r,l,c=new RegExp(/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/gi),u=o.one("head")[0],d=/\ssrc=(['"])(.*?)\1/i,h=/\scharset=(['"])(.*?)\1/i;for(c.lastIndex=0;t=c.exec(e);)i=t[1],a=i?i.match(d):!1,a&&a[2]?(r=document.createElement("script"),r.src=a[2],(s=i.match(h))&&s[2]&&(r.charset=s[2]),r.async=!0,u.appendChild(r)):(l=t[2])&&l.length>0&&n(l)}function n(e){if(e&&/\S/.test(e)){var t=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],n=document.createElement("script");n.text=e,t.insertBefore(n,t.firstChild),setTimeout(function(){t.removeChild(n)},1)}}function i(){if(!(this instanceof i))throw new Error('please use "new Slide()"');this.init.apply(this,arguments)}var s=u,o=r,h=o.all,p=c,f=d,m=l,g=a;return m.mix(m,g),i.plug=function(){},m.augment(i,s.Target,{init:function(e,t){var n=this;if(m.isObject(e))n.con=e;else if(/^#/i.test(e))n.con=o.one(e);else if(o.one("#"+e))n.con=o.one("#"+e);else{if(!o.one(e))throw new Error("Slide Container Hooker not found");n.con=o.one(e)}if(n.buildParam(t),n.buildHTML(),n.bindEvent(),n.fire("ready",{index:0,navnode:n.tabs.item(0),pannelnode:n.pannels.item(0)}),n.reverse){var i;i=n.previous,n.previous=n.next,n.next=i}if(n.carousel)for(var a=0;a<n.colspan;a++)n.fix_for_transition_when_carousel(2*a);return n.fixSlideSize(),n.layerSlide&&n.initLayer(),n.stoped=null,n.renderPannelTextarea(n.currentTab),this},setWrapperSize:function(e){var t=this;m.isUndefined(e)&&(e=0),t.pannels=t.con.all("."+t.contentClass+" ."+t.pannelClass),t.length=t.pannels.length;var n={none:function(){},vSlide:function(){var n=t.animcon.get("region");t.animwrap.setStyles({height:(t.length+e)*n.height/t.colspan+"px"})},hSlide:function(){var n=t.animcon.get("region");t.animwrap.setStyles({width:(t.length+e)*n.width/t.colspan+"px"})},fade:function(){}};return n[t.effect](),m.isUndefined(e)||t.relocateCurrentTab(),this},add:function(e,t){var n=this;return(m.isUndefined(t)||t>n.length)&&(t=n.length),m.isString(e)&&(e=e.one(e)),n.transitions&&e.css({visibility:"hidden"}),t==n.length?(setTimeout(function(){n.setWrapperSize(1)},0),e.insertAfter(n.pannels[t-1])):e.insertBefore(n.pannels[t]),n.setWrapperSize(),n.fixSlideSize(n.currentTab),n.transitions&&e.css({visibility:""}),n.transitions,this},remove:function(e){var t=this;if(1!==t.length)return e<=t.currentTab&&(t.currentTab--,t.length--),t.transitions&&t.con.css({display:"none"}),o.one(t.pannels[e]).remove(),t.setWrapperSize(),t.transitions&&t.con.css({display:"block"}),t.fixSlideSize(t.currentTab),this},removeLast:function(){var e=this;return e.remove(e.length-1),e},renderLazyData:function(e){if(e.setStyle("display","none"),"1"!=e.attr("lazy-data")){e.attr("lazy-data","1"),m.isUndefined(i);var n=e.get("innerHTML").replace(/&lt;/gi,"<").replace(/&gt;/gi,">"),i=o.create("<div>"+n+"</div>");o.one(i).insertBefore(e),t(n)}},renderPannelTextarea:function(e){var t=this;if(t.pannels.item(e))for(var n=function(e){var n=t.pannels.item(e).all(".data-lazyload");n&&n.each(function(e){t.renderLazyData(h(e))})},i=0;i<t.colspan;i++)n(e+i)},buildWrap:function(){var e=this;return e.animwrap=o.create('<div style="position:absolute;"></div>'),e.animcon.children().appendTo(e.animwrap),e.animcon.empty().appendChild(e.animwrap),e.pannels=e.con.all("."+e.contentClass+" ."+e.pannelClass),e},doEffectInit:function(){var e=this,t={none:function(){e.pannels=e.con.all("."+e.contentClass+" ."+e.pannelClass),e.pannels.setStyles({display:"none"}),e.pannels.item(e.defaultTab).setStyles({display:"block"})},vSlide:function(){e.buildWrap();var t=e.animcon.get("region");e.pannels.setStyles({"float":"none",overflow:"hidden"}),e.animwrap.setStyles({height:e.length*t.height/e.colspan+"px",overflow:"hidden",top:-1*e.defaultTab*t.height+"px"})},hSlide:function(){e.buildWrap();var t=e.animcon.get("region");e.pannels.setStyles({"float":"left",overflow:"hidden"}),e.transitions?e.animwrap.setStyles({overflow:"hidden",width:e.length*t.width/e.colspan+"px","-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+-1*e.defaultTab*t.width+"px,0,0)"}):e.animwrap.setStyles({width:e.length*t.width/e.colspan+"px",overflow:"hidden",left:-1*e.defaultTab*t.width+"px"})},fade:function(){e.pannels=e.con.all("."+e.contentClass+" ."+e.pannelClass),e.pannels.setStyles({position:"absolute",zIndex:0}),e.pannels.each(function(t,n){t=h(t),n==e.defaultTab?t.setStyles({opacity:1,display:"block"}):t.setStyles({opacity:0,display:"none"})})}};return t[e.effect](),this},buildHTML:function(){var e=this,t=e.con;e.tabs=t.all("."+e.navClass+" "+e.triggerSelector);var n=t.all("."+e.contentClass+" ."+e.pannelClass);if(e.length=n.size(),t.one("."+e.navClass)||o('<ul class="'+e.navClass+'" style="display:none"></ul>').appendTo(e.con),0===e.tabs.size()){for(var i=t.all("."+e.navClass),a="",s=0;s<e.length;s++){var r="";0===s&&(r=e.selectedClass),a+='<li class="'+r+'"><a href="javascript:void(0);">'+(s+1)+"</a></li>"}i.set("innerHTML",a)}return e.tabs=t.all("."+e.navClass+" "+e.triggerSelector),e.animcon=t.one("."+e.contentClass),e.animwrap=null,e.doEffectInit(),e.carousel?(e.fixSlideSize(e.currentTab-e.colspan),e.highlightNav(e.currentTab-e.colspan)):(e.fixSlideSize(e.currentTab),e.highlightNav(e.getWrappedIndex(e.currentTab))),e.autoSlide===!0&&(e.invisibleStop&&e.isSlideVisible()||!e.invisibleStop)&&e.play(),this},getCurrentPannel:function(){var e=this;return o.one(e.pannels[e.currentTab])},renderWidth:function(){var e=this,t=e.animcon.get("region").width;return"hSlide"==e.effect&&(t/=e.colspan),e.pannels.setStyles({width:t+"px"}),this},renderHeight:function(){var e=this,t=e.animcon.get("region").height;return"vSlide"==e.effect&&(t/=e.colspan),e.pannels.setStyles({height:t+"px"}),this},relocateCurrentTab:function(e){var t=this;return m.isUndefined(e)&&(e=t.currentTab),"hSlide"==t.effect?(t.transitions?t.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+-1*e*t.animcon.get("region").width/t.colspan+"px,0,0)","-webkit-backface-visibility":"hidden"}):t.animwrap.setStyles({left:-1*e*t.animcon.get("region").width/t.colspan}),t.currentTab=e,this):void 0},fixSlideSize:function(e){var t=this;return t.adaptive_fixed_width&&t.renderWidth(),t.adaptive_fixed_height&&t.renderHeight(),t.adaptive_fixed_size&&t.renderHeight().renderWidth(),t.resetSlideSize(e),this},removeHeightTimmer:function(){var e=this;m.isNull(e.heightTimmer)||(clearInterval(e.heightTimmer),e.heightTimmer=null)},addHeightTimmer:function(){var e=this;m.isNull(e.heightTimmer)||(clearInterval(e.heightTimmer),e.heightTimmer=null);var t=function(){"hSlide"==e.effect&&e.animcon.setStyles({height:e.pannels.item(e.currentTab).get("region").height+"px"})};e.heightTimmer=setInterval(t,100),t()},resetSlideSize:function(e){var t,n,i=this;return("undefined"==typeof e||null===e)&&(e=i.currentTab),"hSlide"==i.effect||"vSlide"==i.effect?("hSlide"==i.effect&&(t=i.adaptive_width?i.adaptive_width():i.animcon.get("region").width,n=i.pannels.item(e).get("region").height,i.animwrap.setStyles({width:i.pannels.size()*t+"px"}),t/=i.colspan,i.pannels.setStyles({width:t+"px",display:"block"}),i.animcon.setStyles({width:t*i.colspan+"px",overflow:"hidden"}),i.animWrapperAutoHeightSetting&&i.animcon.setStyles({height:n+"px"})),"vSlide"==i.effect&&(t=i.pannels.item(e).get("region").width,n=i.adaptive_height?i.adaptive_height():i.animcon.get("region").height,i.animwrap.setStyles({height:i.pannels.size()*n+"px"}),n/=i.colspan,i.pannels.setStyles({height:n*i.colspan+"px",display:"block"}),i.animcon.setStyles({height:n*i.colspan+"px",overflow:"hidden"}),i.animWrapperAutoHeightSetting&&i.animcon.setStyles({width:t+"px"})),this):void 0},getWrappedIndex:function(e){var t=this,n=0;return n=t.carousel?e<t.colspan?t.length-3*t.colspan+e:e>=t.length-t.colspan?e-(t.length-t.colspan):e-t.colspan:e},getMousePosition:function(){var e=this,t=function(t){e._t_mouseX=t.clientX,e._t_mouseY=t.clientY};o.one(document).on("mousemove",t),setTimeout(function(){o.one(window).detach("mouseover",t)},e.triggerDelay)},massTrigger:function(e,t){var n=this;return m.inArray(n.eventType,["mouseover","mouseenter"])?(n.getMousePosition(),void(m.isUndefined(n._fired)||m.isNull(n._fired)?n._fired=setTimeout(function(){n.inRegion([n._t_mouseX+o.one(window).scrollLeft(),n._t_mouseY+o.one(window).scrollTop()],o.one(t))&&e(o.one(t)),n._fired=null},n.triggerDelay):(clearTimeout(n._fired),n._fired=setTimeout(function(){n.inRegion([n._t_mouseX+o.one(window).scrollLeft(),n._t_mouseY+o.one(window).scrollTop()],o.one(t))&&e(o.one(t)),n._fired=null},n.triggerDelay)))):void e(o.one(t))},getMaxAnimDelay:function(e){var t=this,n=0;if(t.sublayers)return m.each(t.sublayers[e],function(e){e.durationout+e.delayout>n&&(n=e.durationout+e.delayout)}),n},inRegion:function(e,t){var n=t.offset(),i={width:t.width(),height:t.height()};return e[0]>=n.left&&e[0]<=n.left+i.width&&e[1]>=n.top&&e[1]<=n.top+i.height?!0:!1},bindEvent:function(){var e=this;if(m.inArray(e.eventType,["click","mouseover","mouseenter"])&&e.con._delegate(e.eventType,function(t){t.preventDefault(),e.massTrigger(function(t){var n=Number(e.tabs.indexOf(t));e.carousel&&(n=(n+1)%e.length),e.go(n),e.autoSlide&&e.stoped===!1&&e.stop().play()},t.currentTarget)},"."+e.navClass+" "+e.triggerSelector),e.hoverStop&&(e.con._delegate("mouseover",function(){if(e.isMouseover=!0,e.autoSlide){var t=e.stoped;e.stop(),e.stoped=t}},"."+e.contentClass+" ."+e.pannelClass),e.con._delegate("mouseout",function(){e.isMouseover=!1,e.autoSlide&&!!e.stoped==!1&&e.play()},"."+e.contentClass+" ."+e.pannelClass)),o.one(window).on("resize",function(){e.fixSlideSize(e.currentTab),e.relocateCurrentTab()}),e.on("beforeSwitch",function(){return"function"==typeof e.before_switch?(e._executeSwitch=e.before_switch(),e._executeSwitch):"boolean"==typeof e.before_switch?(e._executeSwitch=e.before_switch,e.before_switch):(e._executeSwitch=!0,!0)}),!e.touchmove)return this;if(e.con._delegate("touchstart",function(t){e.stop(),e.touching=!0,e.is_last()&&e.carousel&&e.fix_next_carousel(),e.is_first()&&e.carousel&&e.fix_pre_carousel(),e.startX=t.changedTouches[0].clientX,e.startY=t.changedTouches[0].clientY,e.animwrap.setStyles({"-webkit-transition-duration":"0s"}),e.startT=Number(new Date)},"."+e.contentClass),e.con._delegate("touchend",function(t){e.touching=!1;var n=t.changedTouches[0].clientX,i=Number(e.animcon.get("region").width);e.deltaX=Math.abs(n-e.startX);var a=Math.abs(n)<Math.abs(e.startX),s=!a,o=e.carousel?!1:e.is_last()&&a||e.is_first()&&s,r=function(){e.animwrap.setStyles({"-webkit-transition-duration":Number(e.speed)/2+"s","-webkit-transform":"translate3d("+-1*e.currentTab*e.animcon.get("region").width/e.colspan+"px,0,0)"})},l=function(){var t=e.animcon.get("region").width/e.colspan,n=parseInt((e.deltaX-t/2)/t,10);a?(n>=1&&e.length>2&&(e.currentTab+=n+1,e.currentTab>=e.length-e.colspan&&(e.currentTab=e.length-e.colspan-1)),e.next()):(n>=1&&e.length>2&&(e.currentTab+=-1*n-1,e.currentTab<=0&&(e.currentTab=1)),e.previous())};return e.touchmove&&e.deltaX<30?void r():(!o&&(e.touchmove&&e.deltaX>i/3||!e.touchmove&&e.carousel||!e.carousel&&e.touchmove&&"hSlide"==e.effect||!e.touchmove&&!e.carousel||Number(new Date)-e.startT<550)?l():r(),void(e.autoSlide&&e.stoped===!1&&e.play()))},"."+e.contentClass),e.touchmove&&(e.con._delegate("touchmove",function(t){if(!(t.touches.length>1)){e.deltaX=t.touches[0].clientX-e.startX;var n=e.is_last()&&e.deltaX<0||e.is_first()&&e.deltaX>0;if(!e.carousel&&"hSlide"==e.effect&&n&&(e.deltaX=e.deltaX/3),e.isScrolling=Math.abs(e.deltaX)<Math.abs(t.touches[0].clientY-e.startY)?!0:!1,!e.isScrolling){t.preventDefault(),e.stop();var i=Number(e.animcon.get("region").width/e.colspan),a=e.deltaX-e.currentTab*i;e.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+a+"px,0,0)"})}}},"."+e.contentClass),e.animwrap&&e.animwrap.on("webkitTransitionEnd",function(){})),e.invisibleStop){var t=m.getHiddenProp();if(t){var n,i=t.replace(/[H|h]idden/,"")+"visibilitychange";o.one(document).on(i,function(){m.isHidden()?e.timer?(n=!0,e.stop()):n=!1:e.isSlideVisible()&&n&&e.play()})}o.one(window).on("scroll resize",function(){e.isSlideVisible()?e.timer||e.hoverStop&&(!e.hoverStop||e.isMouseover)||e.play():e.timer&&e.stop()})}return this},isSlideVisible:function(){var e=this,t=e.animcon.offset().left,n=e.animcon.offset().top,i=e.animcon.width(),a=e.animcon.height(),s=o.one(window).scrollTop(),r=o.one(window).scrollLeft();return s>n+a||s+o.one(window).height()<n||r>t+i||r+o.one(window).width()<t?!1:!0},initLayer:function(){var e=this;if(!("ontouchstart"in document.documentElement||f.ie>0&&f.ie<9)){var t=["durationin","easingin","durationout","easingout","delayin","delayout","slideindirection","slideoutdirection","offsetin","offsetout","alpha","easeInStrong","easeOutStrong","easeBothStrong","easeNone","easeIn","easeOut","easeBoth","elasticIn","elasticOut","elasticBoth","backIn","backOut","backBoth","bounceIn","bounceOut","bounceBoth","left","top","right","bottom"],n={durationin:1e3,easingin:"easeIn",durationout:1e3,easingout:"easeOut",delayin:300,delayout:300,slideindirection:"right",slideoutdirection:"left",alpha:!0,offsetin:50,offsetout:50},i=function(e){function i(e,t){var n=r[t];a[t]=void 0===n||null===n?e:n}var a=this,s=e.attr("rel").replace(/"'/gi,"").replace(new RegExp("("+t.join("|")+")","ig"),'"$1"'),r=p.parse("{"+s+"}");m.each(n,i),this.el=e,this.left=Number(e.css("left").replace("px","")),this.top=Number(e.css("top").replace("px","")),this.animIn=function(){var e=this,t=e.offsetin,n=e.slideindirection,i={left:function(){e.el.css({left:e.left-t})},top:function(){e.el.css({top:e.top-t})},right:function(){e.el.css({left:e.left+t})},bottom:function(){e.el.css({top:e.top+t})}};i[n](),setTimeout(function(){var t={left:{left:e.left},top:{top:e.top},bottom:{top:e.top},right:{left:e.left}},i={};m.mix(i,t[n]),e.alpha&&m.mix(i,{opacity:1}),o.one(e.el).animate(i,e.durationout/1e3,e.easingin,function(){})},e.delayin),e.alpha&&e.el.css({opacity:0})},this.animOut=function(){var e=this,t=e.offsetout,n=e.slideoutdirection,i={left:function(){e.el.css({left:e.left})},top:function(){e.el.css({top:e.top})},right:function(){e.el.css({left:e.left})},bottom:function(){e.el.css({top:e.top})}};i[n](),setTimeout(function(){var i={left:{left:e.left+t},top:{top:e.top+t},bottom:{top:e.top-t},right:{left:e.left-t}},a={};m.mix(a,i[n]),e.alpha&&m.mix(a,{opacity:0}),o.one(e.el).animate(a,e.durationout/1e3,e.easingout,function(){})},e.delayout),e.alpha&&e.el.css({opacity:1})}};e.sublayers=[],e.pannels.each(function(t,n){return t=h(t),("vSlide"==e.effect||"hSlide"==e.effect)&&t.css({position:"relative"}),0===t.all('[alt="sublayer"]').length?void(e.sublayers[n]=[]):(void 0===e.sublayers[n]&&(e.sublayers[n]=[]),void t.all('[alt="sublayer"]').each(function(t){t=h(t),e.sublayers[n].push(new i(t))}))}),e.on("beforeSwitch",function(t){return t.index===e.currentTab?!1:void e.subLayerRunin(t.index)}),e.on("beforeTailSwitch",function(t){return e.subLayerRunout(t.index),e.getMaxAnimDelay(t.index)})}},subLayerRunin:function(e){var t=this,n=t.sublayers[e];m.each(n,function(e){e.animIn()})},subLayerRunout:function(e){var t=this,n=t.sublayers[e];m.each(n,function(e){e.animOut()})},buildParam:function(e){function t(t,i){var a=e[i];n[i]=void 0===a||null===a?t:a}var n=this;return(void 0===e||null===e)&&(e={}),m.each({autoSlide:!1,speed:300,timeout:3e3,effect:"none",eventType:"click",easing:"easeBoth",hoverStop:!0,invisibleStop:!1,selectedClass:"selected",conClass:"t-slide",navClass:"tab-nav",triggerSelector:"li",contentClass:"tab-content",pannelClass:"tab-pannel",before_switch:!0,carousel:!1,reverse:!1,touchmove:!0,adaptive_fixed_width:!1,adaptive_fixed_height:!1,adaptive_fixed_size:!1,adaptive_width:!1,adaptive_height:!1,defaultTab:0,layerSlide:!1,layerClass:"tab-animlayer",colspan:1,animWrapperAutoHeightSetting:!0,webkitOptimize:!0,triggerDelay:300,autoActived:!0},t),m.mix(n,{tabs:[],animcon:null,pannels:[],timmer:null,touching:!1}),n.speed=n.speed/1e3,0!==n.defaultTab&&(n.defaultTab=Number(n.defaultTab)-1),n.carousel&&(n.defaultTab=0,n.defaultTab=n.colspan+n.defaultTab,n.effect="hSlide"),n.currentTab=n.defaultTab,n.transitions="webkitTransition"in document.body.style&&n.webkitOptimize,n},fix_for_transition_when_carousel:function(e){var t=this;"undefined"==typeof e&&(e=0);var n=t.con;if(t.animcon=t.con.one("."+t.contentClass),t.animwrap=t.animcon.one("div"),t.pannels=n.all("."+t.contentClass+" ."+t.pannelClass),"hSlide"==t.effect){var i=Number(t.animcon.get("region").width/t.colspan);t.animwrap.setStyle("width",t.pannels.size()*i+2*i);var a=t.pannels.item(e).getDOMNode().cloneNode(!0),s=t.pannels.item(t.pannels.size()-1-e).getDOMNode().cloneNode(!0);if(t.animwrap.append(a),t.animwrap.prepend(s),0===t.defaultTab)var o=-1*i*(e/2+1+t.defaultTab-1);else var o=-1*i*(e/2+1);t.transitions?t.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+o+"px,0,0)","-webkit-backface-visibility":"hidden",left:"0"}):t.animwrap.setStyle("left",o)}return t.pannels=n.all("."+t.contentClass+" ."+t.pannelClass),t.length=t.pannels.size(),this},isAming:function(){return!1},previous:function(e){var t=this,n=t.currentTab+t.length-1-(t.colspan-1);return n>=t.length-t.colspan+1&&(n%=t.length-t.colspan+1),t.carousel&&t.is_first()?(t.fix_pre_carousel(),t.previous.call(t),this):(t.go(n,e),this)},is_last:function(){var e=this;return e.currentTab==e.length-(e.colspan-1)-1?!0:!1},is_first:function(){var e=this;return 0===e.currentTab?!0:!1},next:function(e){var t=this,n=t.currentTab+1;return n>=t.length-t.colspan+1&&(n%=t.length-t.colspan+1),t.carousel&&t.is_last()?(t.fix_next_carousel(),t.next.call(t),this):(t.go(n,e),this)},fix_next_carousel:function(){var e=this;e.currentTab=e.colspan;var t=e.con;"none"!=e.effect&&(e.pannels=t.all("."+e.contentClass+" ."+e.pannelClass));var n="-"+Number(e.animcon.get("region").width).toString()+"px";"hSlide"==e.effect?e.transitions?e.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+n+",0,0)"}):e.animwrap.setStyle("left",n):"vSlide"==e.effect},fix_pre_carousel:function(){var e=this;e.currentTab=e.length-1-2*e.colspan+1;var t=e.con;"none"!=e.effect&&(e.pannels=t.all("."+e.contentClass+" ."+e.pannelClass));var n="-"+(Number(e.animcon.get("region").width/e.colspan)*e.currentTab).toString()+"px";"hSlide"==e.effect?e.transitions?e.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+n+",0,0)"}):e.animwrap.setStyle("left",n):"vSlide"==e.effect},highlightNav:function(e){var t=this;return t.carousel&&t.colspan>1?this:(t.tabs.item(e)&&(t.tabs.removeClass(t.selectedClass),t.tabs.item(e).addClass(t.selectedClass)),this)},hightlightNav:function(){var e=this;return e.highlightNav.apply(e,arguments),this},unhighlightNav:function(e){var t=this;return t.carousel&&t.colspan>1?this:(t.tabs.item(e)&&t.tabs.removeClass(t.selectedClass),this)},unhighlightNavAll:function(){var e=this;return e.tabs.removeClass(e.selectedClass),this},switch_to:function(e,t){var n=this;if(t===!1)var i=!1;else var i=!0;var a=function(){m.isFunction(t)&&t.call(n,n),n.fire("afterSwitch",{index:n.currentTab,navnode:n.tabs.item(n.getWrappedIndex(n.currentTab)),pannelnode:n.pannels.item(n.currentTab)})},s=n.fire("beforeTailSwitch",{index:n.currentTab,navnode:n.tabs.item(n.getWrappedIndex(n.currentTab)),pannelnode:n.pannels.item(n.currentTab)});if(n.fixSlideSize(e),n.autoSlide&&n.stoped===!1&&n.stop().play(),e>=n.length&&(e%=n.length),e==n.currentTab)return this;if(n.anim)try{n.anim.stop(),n.anim=null}catch(r){}var l={none:function(e){n.pannels.setStyles({display:"none"}),n.pannels.item(e).setStyles({display:"block"}),a()},vSlide:function(e){n.transitions?i?(n.anim=o.one(n.animwrap).css({"-webkit-transition-duration":n.speed+"s","-webkit-transition-timing-function":n.easing,"-webkit-transform":"translate3d(0,"+-1*e*n.animcon.get("region").height/n.colspan+"px,0)","-webkit-backface-visibility":"hidden",opacity:1}),setTimeout(function(){a()},1e3*n.speed)):a():i?n.anim=o.one(n.animwrap).animate({top:-1*e*n.animcon.get("region").height/n.colspan},n.speed,n.easing,function(){a()}):(n.animwrap.css({top:-1*e*n.animcon.get("region").height/n.colspan}),a())},hSlide:function(e){n.transitions?i?(n.anim=o.one(n.animwrap).css({"-webkit-transition-duration":n.speed+"s","-webkit-transition-timing-function":n.easing,"-webkit-transform":"translate3d("+-1*e*n.animcon.get("region").width/n.colspan+"px,0,0)","-webkit-backface-visibility":"hidden",opacity:1}),setTimeout(function(){a()},1e3*n.speed)):a():i?n.anim=o.one(n.animwrap).animate({left:-1*e*n.animcon.get("region").width/n.colspan},n.speed,n.easing,function(){a()}):(n.animwrap.css({left:-1*e*n.animcon.get("region").width/n.colspan}),a())},fade:function(e){var t=n.currentTab;n.pannels.item(e).setStyle({display:"block"}),n.pannels.item(e).setStyle("opacity",0),n.pannels.item(t).setStyle("zIndex",1),n.pannels.item(e).setStyle("zIndex",2),n.anim=o.one(n.pannels.item(e)).animate({opacity:1},n.speed,n.easing,function(){n.pannels.item(t).setStyle("zIndex",0),n.pannels.item(e).setStyle("zIndex",1),n.pannels.item(t).setStyle("opacity",0),n.pannels.item(t).setStyles({display:"none"}),a(),n.fire("afterSwitch",{index:e,navnode:n.tabs.item(n.getWrappedIndex(e)),pannelnode:n.pannels.item(e)})})}},c=function(){var t=n.fire("beforeSwitch",{index:e,navnode:n.tabs.item(e),pannelnode:n.pannels.item(e)});t._executeSwitch!==!1&&(e+n.colspan>n.pannels.size()&&(e=n.pannels.size()-n.colspan),l[n.effect](e),n.currentTab=e,n.highlightNav(n.getWrappedIndex(e)),n.fire("switch",{index:e,navnode:n.tabs.item(n.getWrappedIndex(e)),pannelnode:n.pannels.item(e)}),n.renderPannelTextarea(e))};m.isNumber(s)?setTimeout(function(){c()},s):c()},go:function(e,t){var n=this;return n.switch_to(e,t),this},play:function(){var e=this;return null!==e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.next().play()},Number(e.timeout)),e.stoped=!1,this},stop:function(){var e=this;return clearTimeout(e.timer),e.timer=null,e.stoped=!0,this}}),e=i}(),o=function(e){"use strict";var t=s;return e=t}(),n.exports=o});!function(){function n(n,r,t){var e,i,o,a,f;e=function(n){function r(){var n="";for(var r in e)n+=r+"|";return n=n.slice(0,-1),o=new RegExp(n,"g")}var t,e={"&":"&amp;",">":"&gt;","<":"&lt;","`":"&#x60;","/":"&#x2F;",'"':"&quot;","'":"&#x27;"},i=/[&<>"'`]/,o=r(),a=/\\?\{([^{}]+)\}/g,f="undefined"!=typeof global?global:window,u=Object.prototype.toString;return n=t={isArray:Array.isArray||function(n){return"[object Array]"===u.call(n)},keys:Object.keys||function(n){var r,t=[];for(r in n)n.hasOwnProperty(r)&&t.push(r);return t},each:function(n,r,e){if(n){var i,o,a,f=0,u=n&&n.length,s=void 0===u||"[object Function]"===Object.prototype.toString.call(n);if(e=e||null,s)for(a=t.keys(n);f<a.length&&(i=a[f],r.call(e,n[i],i,n)!==!1);f++);else for(o=n[0];u>f&&r.call(e,o,f,n)!==!1;o=n[++f]);}return n},mix:function(n,r){if(r)for(var t in r)n[t]=r[t];return n},globalEval:function(n){f.execScript?f.execScript(n):!function(n){f.eval.call(f,n)}(n)},substitute:function(n,r,t){return"string"==typeof n&&r?n.replace(t||a,function(n,t){return"\\"===n.charAt(0)?n.slice(1):void 0===r[t]?"":r[t]}):n},escapeHtml:function(n){return n=""+n,i.test(n)?(n+"").replace(o,function(n){return e[n]}):n},merge:function(){for(var n=0,r=arguments.length,e={};r>n;n++){var i=arguments[n];i&&t.mix(e,i)}return e}}}(),i=function(n){function r(n,r,t){this.data=void 0!==n?n:{},t?(this.parent=t,this.root=t.root):(this.parent=void 0,this.root=this),this.affix=r||{},this.ready=!1}return r.prototype={isScope:1,constructor:r,setParent:function(n){this.parent=n,this.root=n.root},set:function(n,r){this.affix[n]=r},setData:function(n){this.data=n},getData:function(){return this.data},mix:function(n){var r=this.affix;for(var t in n)r[t]=n[t]},get:function(n){var r,t=this.data,e=this.affix;return null!=t&&(r=t[n]),void 0!==r?r:e[n]},resolveInternalOuter:function(n){var r,t=n[0],e=this,i=e;if("this"===t)r=e.data;else if("root"===t)i=i.root,r=i.data;else{if(!t)return[i.data];do r=i.get(t);while(void 0===r&&(i=i.parent))}return[void 0,r]},resolveInternal:function(n){var r=this.resolveInternalOuter(n);if(1===r.length)return r[0];var t,e=n.length,i=r[1];if(void 0===i)return void 0;for(t=1;e>t;t++){if(null==i)return i;i=i[n[t]]}return i},resolveLooseInternal:function(n){var r=this.resolveInternalOuter(n);if(1===r.length)return r[0];var t,e=n.length,i=r[1];for(t=1;null!=i&&e>t;t++)i=i[n[t]];return i},resolveUp:function(n){return this.parent&&this.parent.resolveInternal(n)},resolveLooseUp:function(n){return this.parent&&this.parent.resolveLooseInternal(n)},resolveOuter:function(n,r){var t,e=this,i=e;if(!r&&1===n.length){if(t=e.get(n[0]),void 0!==t)return[t];r=1}if(r)for(;i&&r--;)i=i.parent;return i?[void 0,i]:[void 0]},resolveLoose:function(n,r){var t=this.resolveOuter(n,r);return 1===t.length?t[0]:t[1].resolveLooseInternal(n)},resolve:function(n,r){var t=this.resolveOuter(n,r);return 1===t.length?t[0]:t[1].resolveInternal(n)}},n=r}(),o=function(n){function r(n,r,t){this.list=n,this.init(),this.next=r,this.ready=!1,this.tpl=t}function t(n,t){var e=this;e.config=t,e.head=new r(e,void 0),e.callback=n,this.init()}var i=e;return r.prototype={constructor:r,isBuffer:1,init:function(){this.data=""},append:function(n){return this.data+=n,this},write:function(n){if(null!=n){if(n.isBuffer)return n;this.data+=n}return this},writeEscaped:function(n){if(null!=n){if(n.isBuffer)return n;this.data+=i.escapeHtml(n)}return this},insert:function(){var n=this,t=n.list,e=n.tpl,i=new r(t,n.next,e),o=new r(t,i,e);return n.next=o,n.ready=!0,o},async:function(n){var r=this.insert(),t=r.next;return n(r),t},error:function(n){var r=this.list.callback;if(r){var t=this.tpl;if(t){n instanceof Error||(n=new Error(n));var e=t.name,i=t.pos.line,o="XTemplate error in file: "+e+" at line "+i+": ";n.stack=o+n.stack,n.message=o+n.message,n.xtpl={pos:{line:i},name:e}}this.list.callback=null,r(n,void 0)}},end:function(){var n=this;return n.list.callback&&(n.ready=!0,n.list.flush()),n}},t.prototype={constructor:t,init:function(){this.data=""},append:function(n){this.data+=n},end:function(){this.callback(null,this.data),this.callback=null},flush:function(){for(var n=this,r=n.head;r;){if(!r.ready)return n.head=r,void 0;this.data+=r.data,r=r.next}n.end()}},t.Buffer=r,n=t}(),a=function(n){var r=i,t=e,o={range:function(n,r){var t=r.params,e=t[0],i=t[1],o=t[2];o?(e>i&&o>0||i>e&&0>o)&&(o=-o):o=e>i?-1:1;for(var a=[],f=e;i>e?i>f:f>i;f+=o)a.push(f);return a},"void":function(){return void 0},foreach:function(n,t,e){var i,o,a,f,u=t.params,s=u[0],l=u[2]||"xindex",c=u[1];if(s)for(i=s.length,f=0;i>f;f++)o=new r(s[f],{xcount:i,xindex:f},n),a=o.affix,"xindex"!==l&&(a[l]=f,a.xindex=void 0),c&&(a[c]=s[f]),e=t.fn(o,e);return e},forin:function(n,t,e){var i,o,a,f=t.params,u=f[0],s=f[2]||"xindex",l=f[1];if(u)for(a in u)i=new r(u[a],{xindex:a},n),o=i.affix,"xindex"!==s&&(o[s]=a,o.xindex=void 0),l&&(o[l]=u[a]),e=t.fn(i,e);return e},each:function(n,r,e){var i=r.params,a=i[0];return a?t.isArray(a)?o.foreach(n,r,e):o.forin(n,r,e):e},"with":function(n,t,e){var i=t.params,o=i[0];if(o){var a=new r(o,void 0,n);e=t.fn(a,e)}return e},"if":function(n,r,t){var e=r.params,i=e[0];if(i){var o=r.fn;o&&(t=o(n,t))}else{var a=!1,f=r.elseIfs,u=r.inverse;if(f)for(var s=0,l=f.length;l>s;s++){var c=f[s];if(a=c.test(n)){t=c.fn(n,t);break}}!a&&u&&(t=u(n,t))}return t},set:function(n,r,t){for(var e=r.hash,i=e.length,o=0;i>o;o++){var a=e[o],f=a.key,u=a.depth,s=a.value;if(1===f.length){for(var l=n.root;u&&l!==n;)n=n.parent,--u;n.set(f[0],s)}else{var c=n.resolve(f.slice(0,-1),u);c&&(c[f[f.length-1]]=s)}}return t},include:1,parse:1,extend:1,block:function(n,r,t){var e,i=this,o=i.runtime,a=r.params,f=a[0];2===a.length&&(e=a[0],f=a[1]);var u,s=o.blocks=o.blocks||{},l=s[f],c={fn:r.fn,type:e};if(l){if(l.type)if("append"===l.type)c.next=l,s[f]=c;else if("prepend"===l.type){var d;for(u=l;u&&"prepend"===u.type;)d=u,u=u.next;c.next=u,d.next=c}}else s[f]=c;if(!o.extendTpl)for(u=s[f];u;)u.fn&&(t=u.fn.call(i,n,t)),u=u.next;return t},macro:function(n,t,e){var i=t.hash,o=t.params,a=o[0],f=o.slice(1),u=this,s=u.runtime,l=s.macros=s.macros||{},c=l[a];if(t.fn)l[a]={paramNames:f,hash:i,fn:t.fn};else if(c){var d,v=c.hash||{};if(d=c.paramNames)for(var h=0,p=d.length;p>h;h++){var m=d[h];v[m]=f[h]}if(i)for(var g in i)v[g]=i[g];var x=new r(v);x.root=n.root,e=c.fn.call(u,x,e)}else{var y="can not find macro: "+a;e.error(y)}return e}};return o["debugger"]=function(){},n=o}(),f=function(n){function r(n,r,t,e,i,o,a,f){this.name=n,this.originalName=o||n,this.runtime=r,this.root=t,this.pos={line:1},this.scope=e,this.buffer=i,this.fn=a,this.parent=f}function t(n,r,t){var e=t[0],i=n&&n[e]||r&&r[e]||x[e];if(1===t.length)return i;if(i)for(var o=t.length,a=1;o>a;a++)if(i=i[t[a]],!i)return!1;return i}function f(n,r){var t=n.split("/"),e=r.split("/");t.pop();for(var i=0,o=e.length;o>i;i++){var a=e[i];"."===a||(".."===a?t.pop():t.push(a))}return t.join("/")}function u(n,r,e,i,o,a){var f,u,s;if(a||(s=t(n.runtime.commands,n.root.config.commands,o)),s)return s.call(n,r,e,i);if(s!==!1){var l=o.slice(0,-1);if(f=r.resolve(l,a),null==f)return i.error("Execute function `"+o.join(".")+"` Error: "+l.join(".")+" is undefined or null"),i;if(u=f[o[o.length-1]])try{return u.apply(f,e.params||[])}catch(c){return i.error("Execute function `"+o.join(".")+"` Error: "+c.message),i}}return i.error("Command Not Found: "+o.join(".")),i}function s(n,r){var t=this;t.fn=n,t.config=m.merge(s.globalConfig,r),this.subNameResolveCache={}}function l(n,r,t){if("."!==r.charAt(0))return r;var e=t+"_ks_"+r,i=n.subNameResolveCache,o=i[e];return o?o:r=i[e]=f(t,r)}function c(n,r,t,e,i,o){var a=l(n,o,i.name),f=e.insert(),u=f.next;return v(n,a,i.runtime,r,f,o,t,e.tpl),u}function d(n,t,e,i,o){var a=e.insert(),f=a.next,u=new r(o.TPL_NAME,i.runtime,n,t,a,void 0,o,e.tpl);return a.tpl=u,h(u),f}function v(n,t,e,i,o,a,f,u){var s=new r(t,e,n,i,o,a,void 0,u);o.tpl=s,n.config.loader.load(s,function(n,r){"function"==typeof r?(s.fn=r,h(s)):n?o.error(n):(r=r||"",f?o.writeEscaped(r):o.data+=r,o.end())})}function h(n){var r=n.fn();if(r){var t,e=n.runtime,i=e.extendTpl;if(i&&(t=i.params[0],!t))return r.error("extend command required a non-empty parameter");var o=e.extendTplFn,a=e.extendTplBuffer;return o?(e.extendTpl=null,e.extendTplBuffer=null,e.extendTplFn=null,d(n.root,n.scope,a,n,o).end()):t&&(e.extendTpl=null,e.extendTplBuffer=null,c(n.root,n.scope,0,a,n,t).end()),r.end()}}function p(n,r,t){var e=r.params;if(!e[0])return t.error("include command required a non-empty parameter");var i=n,o=e[1],a=r.hash;return a&&(o=o?m.mix({},o):{},m.mix(o,a)),o&&(i=new y(o,void 0,n)),i}var m=e,g=a,x={},y=i,w=o,b={callFn:u,callDataFn:function(n,r){for(var t=r[0],e=t,i=1;i<r.length;i++){var o=r[i];if(!e||null==e[o])return"";t=e,e=e[o]}return e.apply(t,n||[])},callCommand:function(n,r,t,e,i){return u(n,r,t,e,i)}};return m.mix(s,{config:function(n,r){var t=this.globalConfig=this.globalConfig||{};return arguments.length?(void 0!==r?t[n]=r:m.mix(t,n),void 0):t},nativeCommands:g,utils:b,util:m,addCommand:function(n,r){x[n]=r},removeCommand:function(n){delete x[n]}}),s.prototype={constructor:s,Scope:y,nativeCommands:g,utils:b,removeCommand:function(n){var r=this.config;r.commands&&delete r.commands[n]},addCommand:function(n,r){var t=this.config;t.commands=t.commands||{},t.commands[n]=r},include:function(n,r,t,e){return c(this,p(n,r,t),r.escape,t,e,r.params[0])},includeModule:function(n,r,t,e){return d(this,p(n,r,t),t,e,r.params[0])},render:function(n,t,e){var i="",o=this,a=o.fn,f=o.config;"function"==typeof t&&(e=t,t=null),t=t||{},e=e||function(n,r){if(n)throw n instanceof Error||(n=new Error(n)),n;i=r};var u=o.config.name;!u&&a&&a.TPL_NAME&&(u=a.TPL_NAME);var l;l=n instanceof y?n:new y(n);var c=new s.LinkedBuffer(e,f).head,d=new r(u,{commands:t.commands},o,l,c,u,a);return c.tpl=d,a?(h(d),i):(f.loader.load(d,function(n,r){r?(d.fn=o.fn=r,h(d)):n&&c.error(n)}),i)}},s.Scope=y,s.LinkedBuffer=w,n=s}(),t.exports=f}if(window.KISSY)KISSY.add("kg/xtemplate/4.3.0/runtime",[],function(r,t,e,i){n(t,e,i)});else{if(!window.define)throw new Error("Can't found any module manager, such like Kissy CMD AMD SeaJS and etc.");define("kg/xtemplate/4.3.0/runtime",[],n)}}();