define("kg/overlay/6.1.3/index",["node","ua","util","kg/xtemplate/4.3.0/runtime","kg/component/6.0.9/container","kg/component/6.0.9/extension/shim","kg/component/6.0.9/extension/align","kg/component/6.0.9/extension/content-box","util","node","event"],function(e,t,n){var a,s,o,i,r,l,c,d,u,f,v,p,h=e("node"),g=e("ua"),m=e("util"),y=e("kg/xtemplate/4.3.0/runtime"),x=e("kg/component/6.0.9/container"),C=e("kg/component/6.0.9/extension/shim"),b=e("kg/component/6.0.9/extension/align"),_=e("kg/component/6.0.9/extension/content-box"),w=e("util"),k=e("node"),E=e("event");a=function(e){"use strict";function t(){}var n=h;return t.prototype={loading:function(){var e=this;e._loadingExtEl||(e._loadingExtEl=n('<div class="'+e.get("prefixCls")+'ext-loading" style="position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);"/>').appendTo(e.$el)),e._loadingExtEl.show()},unloading:function(){this._loadingExtEl&&this._loadingExtEl.hide()}},e=t}(),s=function(e){"use strict";function t(){return c?"expression(KISSY.DOM.docWidth())":"100%"}function n(){return c?"expression(KISSY.DOM.docHeight())":"100%"}function a(e,a){var s=e.getBaseCssClasses("mask"),o=d('<div  style="width:'+t()+";left:0;top:0;height:"+n()+";position:"+(c?"absolute":"fixed")+';" class="'+s+" "+a+'">'+(c?'<iframe style="position:absolute;left:0;top:0;background:red;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");return o.unselectable(),o.on("mousedown",function(e){e.preventDefault()}),o}function s(){}function o(e,t){var n=e.get("maskNode"),a=e.getBaseCssClasses("mask-hidden");t?n.removeClass(a):n.addClass(a)}function i(e,t,n,a){var s=e.effect||u;if(o(a,n),s!==u){var i,r=e.duration,l=e.easing,c=n?1:0;t.stop(1,1),t.css("display",n?u:"block"),i=s+f[s][c],t[i](r,function(){t.css("display","")},l)}}function r(e){var t,n=this,a=n.get("maskNode");if(t=e.newVal){var s=Number(n.$el.css("z-index"));isNaN(s)||a.css("z-index",s)}i(n.get("mask"),a,t,n)}var l=g,c=6===l.ie,d=h;s.ATTRS={mask:{value:!1},maskNode:{}};var u="none",f={fade:["Out","In"],slide:["Up","Down"]};return s.prototype={__renderUI:function(){var e=this;e.get("mask")&&e.set("maskNode",a(e,e.get("visible")?"":e.getBaseCssClasses("mask-hidden")))},__bindUI:function(){var e,t,n=this;(t=n.get("mask"))&&(e=n.get("maskNode"),t.closeOnClick&&e.on("tap",n.close,n),n.on("afterVisibleChange",r))},__destructor:function(){var e;(e=this.get("maskNode"))&&e.remove()}},e=s}(),o=function(e){"use strict";function t(e){var t=e.$el,n=t.clone(!0);return n.css({visibility:"hidden",overflow:"hidden"}).addClass(e.get("prefixCls")+"overlay-ghost"),e.__afterCreateEffectGhost(n)}function n(e,n){e.__effectGhost&&e.__effectGhost.stop(1,1);var a,s,o,i,l=e.$el,c=h,d=e.get("effect"),u=c(d.target),f=d.duration,v={width:u.width(),height:u.height()},p=u.offset(),g={width:l.width(),height:l.height()},m=l.offset(),y=t(e),x=d.easing;y.insertAfter(l),n?(a=v,o=p,s=g,i=m):(a=g,o=m,s=v,i=p),y.offset(i),r.mix(s,{left:y.css("left"),top:y.css("top")}),l.css("visibility","hidden"),y.css(a),y.offset(o),e.__effectGhost=y,y.css("visibility","visible"),y.animate(s,{Anim:d.Anim,duration:f,easing:x,complete:function(){e.__effectGhost=null,y.remove(),l.css("visibility","")}})}function a(e,t){var a=e.$el,s=e.get("effect"),o=s.effect||"none",r=s.target;if("none"!==o||r){if(r)return void n(e,t);var l=s.duration,c=s.easing,d=t?1:0;a.stop(1,1),a.css({visibility:"visible",display:t?"none":"block"});var u=o+i[o][d];a[u]({duration:l,Anim:s.Anim,complete:function(){a.css({display:"block",visibility:""})},easing:c})}}function s(e){a(this,e.newVal)}function o(){}var i={fade:["Out","In"],slide:["Up","Down"]},r=m;return o.ATTRS={effect:{valueFn:function(){return{effect:"",target:null,duration:.5,easing:"easeOut"}},setter:function(e){var t=e.effect;"string"!=typeof t||i[t]||(e.effect="")}}},o.prototype={__afterCreateEffectGhost:function(e){return e},__bindUI:function(){this.on("afterVisibleChange",s,this)}},e=o}(),i=function(e){"use strict";var t=y;return e=function(){var e=new t(function(e){function t(e,t,n){var a=e.data,i=e.affix;t.data+='\n        <a href="javascript:void(\'close\')"\n           aria-label="Close"\n           class="',c.line=5;var r;r=f(o,e,{params:["close"]},t,["getBaseCssClasses"]);var l=r;t=t.writeEscaped(l),t.data+="\"\n           role='button'>\n            <span class=\"",c.line=7;var d;d=f(o,e,{params:["close-x"]},t,["getBaseCssClasses"]);var u=d;t=t.writeEscaped(u),t.data+='">';var v=(s=i.closeText)!==n?s:(s=a.closeText)!==n?s:e.resolveLooseUp(["closeText"]);return t=t.write(v),t.data+="</span>\n        </a>\n    ",t}function n(e,n,a){var i=e.data,r=e.affix;n.data+="\n    ",c.line=2,c.line=2;var l=(s=r.closable)!==a?s:(s=i.closable)!==a?s:e.resolveLooseUp(["closable"]);return n=v.call(o,e,{params:[l],fn:t},n),n.data+="\n",n}function a(e,t,n){var a=e.data,o=e.affix;t.data+="\n        ",c.line=14;var i=(s=o.content)!==n?s:(s=a.content)!==n?s:e.resolveLooseUp(["content"]);return t=t.write(i),t.data+="\n    ",t}var s,o=this,i=o.root,r=o.buffer,l=o.scope,c=(o.runtime,o.name,o.pos),d=(l.data,l.affix,i.nativeCommands),u=i.utils,f=u.callFn,v=(u.callDataFn,u.callCommand,d.range,d["void"],d.foreach,d.forin,d.each,d["with"],d["if"]),p=(d.set,d.include,d.parse,d.extend,d.block);d.macro,d["debugger"];r.data+="",r=p.call(o,l,{params:["ks-overlay-closable"],fn:n},r),r.data+='\n\n<div class="',c.line=12;var h;h=f(o,l,{params:["content"]},r,["getBaseCssClasses"]);var g=h;return r=r.writeEscaped(g),r.data+='">\n    ',c.line=13,r=p.call(o,l,{params:["ks-overlay-content"],fn:a},r),r.data+="\n</div>",r});return e.render.apply(e,arguments)}}(),r=function(e){"use strict";var t=y;return e=function(){var e=new t(function(e){function t(e,t,n){var a=e.data,s=e.affix;t.data+='\n        <a href="javascript:void(\'close\')"\n           aria-label="Close"\n           class="',u.line=5;var o;o=g(r,e,{params:["close"]},t,["getBaseCssClasses"]);var l=o;t=t.writeEscaped(l),t.data+="\"\n           role='button'>\n            <span class=\"",u.line=7;var c;c=g(r,e,{params:["close-x"]},t,["getBaseCssClasses"]);var d=c;t=t.writeEscaped(d),t.data+='">';var f=(i=s.closeText)!==n?i:(i=a.closeText)!==n?i:e.resolveLooseUp(["closeText"]);return t=t.write(f),t.data+="</span>\n        </a>\n    ",t}function n(e,n,a){var s=e.data,o=e.affix;n.data+="\n    ",u.line=2,u.line=2;var l=(i=o.closable)!==a?i:(i=s.closable)!==a?i:e.resolveLooseUp(["closable"]);return n=y.call(r,e,{params:[l],fn:t},n),n.data+="\n",n}function a(e,t,n){var a=e.data,s=e.affix;t.data+="\n                 ",u.line=15;var o=(i=s.xindex)!==n?i:(i=a.xindex)!==n?i:e.resolveLooseUp(["xindex"]);t=t.writeEscaped(o),t.data+=":";var r=a;return t=t.writeEscaped(r),t.data+=";\n             ",t}function s(e,t,n){var a=e.data,s=e.affix;t.data+="\n                 ",u.line=22;var o=(i=s.xindex)!==n?i:(i=a.xindex)!==n?i:e.resolveLooseUp(["xindex"]);t=t.writeEscaped(o),t.data+=":";var r=a;return t=t.writeEscaped(r),t.data+=";\n             ",t}function o(e,t,n){var a=e.data,s=e.affix;t.data+="\n                 ",u.line=29;var o=(i=s.xindex)!==n?i:(i=a.xindex)!==n?i:e.resolveLooseUp(["xindex"]);t=t.writeEscaped(o),t.data+=":";var r=a;return t=t.writeEscaped(r),t.data+=";\n             ",t}var i,r=this,l=r.root,c=r.buffer,d=r.scope,u=(r.runtime,r.name,r.pos),f=d.data,v=d.affix,p=l.nativeCommands,h=l.utils,g=h.callFn,m=(h.callDataFn,h.callCommand,p.range,p["void"],p.foreach,p.forin,p.each),y=(p["with"],p["if"]),x=(p.set,p.include,p.parse,p.extend,p.block);p.macro,p["debugger"];c.data+="",c=x.call(r,d,{params:["ks-overlay-closable"],fn:n},c),c.data+='\n<div class="',u.line=11;var C;C=g(r,d,{params:["content"]},c,["getBaseCssClasses"]);var b=C;c=c.writeEscaped(b),c.data+='">\n    <div class="',u.line=12;var _;_=g(r,d,{params:["header"]},c,["getBaseCssClasses"]);var w=_;c=c.writeEscaped(w),c.data+='"\n         style="\n             ',u.line=14,u.line=14;var k=(i=v.headerStyle)!==e?i:(i=f.headerStyle)!==e?i:d.resolveLooseUp(["headerStyle"]);c=m.call(r,d,{params:[k],fn:a},c),c.data+='\n                 ">',u.line=17;var E=(i=v.headerContent)!==e?i:(i=f.headerContent)!==e?i:d.resolveLooseUp(["headerContent"]);c=c.write(E),c.data+='</div>\n\n    <div class="',u.line=19;var T;T=g(r,d,{params:["body"]},c,["getBaseCssClasses"]);var S=T;c=c.writeEscaped(S),c.data+='"\n         style="\n             ',u.line=21,u.line=21;var B=(i=v.bodyStyle)!==e?i:(i=f.bodyStyle)!==e?i:d.resolveLooseUp(["bodyStyle"]);c=m.call(r,d,{params:[B],fn:s},c),c.data+='\n                 ">',u.line=24;var U=(i=v.bodyContent)!==e?i:(i=f.bodyContent)!==e?i:d.resolveLooseUp(["bodyContent"]);c=c.write(U),c.data+='</div>\n\n    <div class="',u.line=26;var L;L=g(r,d,{params:["footer"]},c,["getBaseCssClasses"]);var D=L;c=c.writeEscaped(D),c.data+='"\n         style="\n             ',u.line=28,u.line=28;var A=(i=v.footerStyle)!==e?i:(i=f.footerStyle)!==e?i:d.resolveLooseUp(["footerStyle"]);c=m.call(r,d,{params:[A],fn:o},c),c.data+='\n                 ">',u.line=31;var N=(i=v.footerContent)!==e?i:(i=f.footerContent)!==e?i:d.resolveLooseUp(["footerContent"]);return c=c.write(N),c.data+='</div>\n    <div tabindex="0"></div>\n</div>\n\n',c});return e.render.apply(e,arguments)}}(),l=function(e){"use strict";return e=i}(),c=function(e){"use strict";return e=r}(),d=function(e){"use strict";var t=x,n=C,i=b,r=a,c=s,d=o,u=_,f=l,v="hide",p={hide:v,destroy:"destroy"};return e=t.extend([u,n,r,i,c,d],{bindUI:function(){var e=this,t=e.get("closeBtn");t&&t.on("click",function(t){e.close(),t.preventDefault()})},close:function(){var e=this;return e[p[e.get("closeAction")]||v](),e}},{ATTRS:{handleGestureEvents:{value:!1},focusable:{value:!1},allowTextSelection:{value:!0},contentTpl:{value:f},closable:{value:!1,sync:0,render:1,parse:function(){return!!this.get("closeBtn")}},closeBtn:{selector:function(){return"."+this.getBaseCssClass("close")}},closeAction:{value:v},closeText:{value:"close",render:1},visible:{value:!1}},xclass:"overlay"})}(),u=function(e){"use strict";function t(e,t,n){t=e.get(t),t.html(n)}function n(e){var t=this,n=e.keyCode;if(n===u){var a=t.$el,s=o(e.target),i=a.last();if(s.equals(a)&&e.shiftKey)i[0].focus(),e.halt();else if(s.equals(i)&&!e.shiftKey)t.focus(),e.halt();else if(s.equals(a)||a.contains(s))return;e.halt()}}var a=w,s=d,o=k,i=c,r=E,l=s.extend({beforeCreateDom:function(e){a.mix(e.elAttrs,{role:"dialog","aria-labelledby":"ks-stdmod-header-"+this.get("id")})},getChildrenContainerEl:function(){return this.get("body")},__afterCreateEffectGhost:function(e){var t=this,n=t.get("body");return e.all("."+t.get("prefixCls")+"stdmod-body").css({height:n.height(),width:n.width()}).html(""),e},handleKeyDownInternal:function(e){return this.get("escapeToClose")&&e.keyCode===r.KeyCode.ESC?void(("select"!==e.target.nodeName.toLowerCase()||e.target.disabled)&&(this.close(),e.halt())):void n.call(this,e)},_onSetBodyContent:function(e){t(this,"body",e)},_onSetHeaderContent:function(e){t(this,"header",e)},_onSetFooterContent:function(e){t(this,"footer",e)}},{ATTRS:{focusable:{value:!0},contentTpl:{value:i},header:{selector:function(){return"."+this.getBaseCssClass("header")}},body:{selector:function(){return"."+this.getBaseCssClass("body")}},footer:{selector:function(){return"."+this.getBaseCssClass("footer")}},bodyStyle:{sync:0},footerStyle:{render:1},headerStyle:{render:1},headerContent:{value:"",sync:0,render:1,parse:function(){return this.get("header").html()}},bodyContent:{value:"",sync:0,render:1,parse:function(){return this.get("body").html()}},footerContent:{value:"",sync:0,render:1,parse:function(){return this.get("footer").html()}},closable:{value:!0},escapeToClose:{value:!0}},xclass:"dialog"}),u=r.KeyCode.TAB;return e=l}(),f=function(e){"use strict";function t(){var e,t=this,s=t.get("trigger");t.__mouseEnterPopup=function(n){a.call(t),e=l.later(function(){o.call(t,n),e=void 0},1e3*t.get("mouseDelay"))},s.on("mouseenter",t.__mouseEnterPopup),t._mouseLeavePopup=function(){e&&(e.cancel(),e=void 0),n.call(t)},s.on("mouseleave",t._mouseLeavePopup)}function n(){var e=this,t=1e3*e.get("mouseDelay");e._hiddenTimer=l.later(function(){i.call(e)},t)}function a(){var e=this;e._hiddenTimer&&(e._hiddenTimer.cancel(),e._hiddenTimer=void 0)}function s(){var e=this;e.__clickPopup=function(t){t.preventDefault(),e.get("toggle")?(e.get("visible")?i:o).call(e,t):o.call(e,t)},e.get("trigger").on("click",e.__clickPopup)}function o(e){var t=this;t.set("currentTrigger",c(e.target)),t.show()}function i(){this.set("currentTrigger",void 0),this.hide()}var r=d,l=w,c=k;return e=r.extend({initializer:function(){var e=this,n=e.get("trigger");n&&("mouse"===e.get("triggerType")?t.call(e):s.call(e))},bindUI:function(){var e=this,t=e.get("trigger");t&&"mouse"===e.get("triggerType")&&e.$el.on("mouseleave",n,e).on("mouseenter",a,e)},destructor:function(){var e=this,t=e.$el,s=e.get("trigger");s&&(e.__clickPopup&&s.detach("click",e.__clickPopup),e.__mouseEnterPopup&&s.detach("mouseenter",e.__mouseEnterPopup),e._mouseLeavePopup&&s.detach("mouseleave",e._mouseLeavePopup)),t&&t.detach("mouseleave",n,e).detach("mouseenter",a,e)}},{ATTRS:{trigger:{setter:function(e){return c(e)}},triggerType:{value:"click"},currentTrigger:{},mouseDelay:{value:.1},toggle:{value:!1}},xclass:"popup"})}(),v=function(e){"use strict";var t=d,n=u,a=f;return t.Dialog=n,t.Popup=a,e=t}(),p=function(e){"use strict";return e=v,n.exports.version="6.0.0",e}(),n.exports=p});